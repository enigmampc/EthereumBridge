## Okay, so what now

Enigma will be running the leader, and handling most of the setup and configuration.

### Things that will be provided by leader

1. Database hosting + usernames and passwords
2. Transactional encryption key - must be shared between all parties to decrypt, verify and sign transaction
3. Contract addresses
4. General configuration parameters
5. Docker image

### What do you need to do as a signer

### Light reading

* [How multisig on Secret Network (& Cosmos) works](https://hub.cosmos.network/master/resources/gaiacli.html)

### Step 1 - Generate your keys
1. Generate your Ethereum key. Either in a PKCS11 compatible device, or as hex bytes
2. Generate your Secret Network key, and export it to a file using `secretcli keys export`. This key will be a standard private key. Multisig address will be generated by leader

We may also require manual transaction signing, in case manual intervention is necessary, 
so be sure you know how to do that with the keys you generated.

3. Provide leader with Ethereum address and Secret Network public key (`secretpub1...`). These will be used to instantiate multisig addresses and contracts
4. Once done, leader will provide the Secret Network multisig address and Ethereum smart contract address

### Step 2 - Add Funds to Eth account
Send some Eth to your Ethereum account (recommended 10 ETH)

### Step 3 - Get an access point for Eth and Secret
* Ethereum - Infura, start your own node, etc.
* Secret - Start your own node, or use an available public node

Signers are responsible for managing their own endpoints. 

Request amounts for signers are 10K req/day on Ethereum, and 1K/day on Secret Network.

### Step 4 - Customize docker-compose file (or other docker runner)

You can find an example docker-compose file [here](https://github.com/enigmampc/EthereumBridge/blob/master/docker-compose_example.yaml)


Of all available config parameters, the ones that require setting environment variables are:

  ###### General
  * SWAP_ENV - either "TESTNET", "MAINNET" or "LOCAL" depending on environment

  ###### Node addresses
  * eth_node - address of ethereum node (or service like infura)
  * secret_node - address of secret network rpc node

  ###### Secret Network private key
  * secret_key_name
  * secret_key_file
  * secret_key_password

  ###### Ethereum private key
  * eth_private_key
  * eth_address

  ###### OR if PKCS11 is used:
  * token
  * user_pin
  * label
  * pkcs11_module

  ###### Provided by leader
  * db_username - database username
  * db_password - database password
  * db_host - hostname of database service provider
  * multisig_acc_addr - Secret Network multisig address
  * multisig_wallet_address - Ethereum multisig contract address
  * secret_signers - comma-separated list of the public keys of addresses that comprise the address in `multisig_acc_addr`
  * scrt_swap_address - address of secret contract handling our swaps
  * swap_code_hash - code hash of the secret contract handling our swaps

We recommend setting an .env file and using docker-compose, but you can also use `docker run` or any other docker runner.

### Step 5 - Start the signer

`docker-compose up`

##### Customization

If you want to customize the docker image in this image feel free - the executable is managed by supervisor, the configuration
of which can be found in `deployment/config/supervisor.conf`.
You can add a PKCS11 module by adding installation of the client module to the docker image, and
overriding the pkcs11_module environment variable to point to the library `.so` file. Other HSM or key vault support can be added by request 
